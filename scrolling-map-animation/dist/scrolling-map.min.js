var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e=e||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(t,n){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var r=0,o={next:function(){if(r<t.length){var e=r++;return{value:n(e,t[e]),done:!1}}return o.next=function(){return{done:!0,value:void 0}},o.next()}};return o[Symbol.iterator]=function(){return o},o},$jscomp.polyfill=function(e,t,n,r){if(t){for(n=$jscomp.global,e=e.split("."),r=0;r<e.length-1;r++){var o=e[r];o in n||(n[o]={}),n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.keys",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");var $jscomp$this=this;!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.anime=t()}(this,function(){function o(e){if(!C.col(e))try{return document.querySelectorAll(e)}catch(e){}}function x(e,t){for(var n=e.length,r=2<=arguments.length?t:void 0,o=[],i=0;i<n;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&o.push(a)}return o}function s(e){return e.reduce(function(e,t){return e.concat(C.arr(t)?s(t):t)},[])}function i(e){return C.arr(e)?e:(C.str(e)&&(e=o(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function a(e,t){return e.some(function(e){return e===t})}function u(e){var t,n={};for(t in e)n[t]=e[t];return n}function c(e,t){var n,r=u(e);for(n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function l(e,t){var n,r=u(e);for(n in t)r[n]=C.und(e[n])?t[n]:e[n];return r}function f(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function d(e,t){return C.fnc(e)?e(t.target,t.id,t.total):e}function E(e,t){if(t in e.style)return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function p(e,t){return C.dom(e)&&a(k,t)?"transform":C.dom(e)&&(e.getAttribute(t)||C.svg(e)&&e[t])?"attribute":C.dom(e)&&"transform"!==t&&E(e,t)?"css":null!=e[t]?"object":void 0}function n(e,n){var t=function(e){return-1<e.indexOf("translate")||"perspective"===e?"px":-1<e.indexOf("rotate")||-1<e.indexOf("skew")?"deg":void 0}(n);t=-1<n.indexOf("scale")?1:0+t;if(!(e=e.style.transform))return t;for(var r=[],o=[],i=[],a=/(\w+)\((.+?)\)/g;r=a.exec(e);)o.push(r[1]),i.push(r[2]);return(e=x(i,function(e,t){return o[t]===n})).length?e[0]:t}function m(e,t){switch(p(e,t)){case"transform":return n(e,t);case"css":return E(e,t);case"attribute":return e.getAttribute(t)}return e[t]||0}function v(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=f(e)||0;switch(t=parseFloat(t),e=parseFloat(e.replace(n[0],"")),n[0][0]){case"+":return t+e+r;case"-":return t-e+r;case"*":return t*e+r}}function g(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function r(e){e=e.points;for(var t,n=0,r=0;r<e.numberOfItems;r++){var o=e.getItem(r);0<r&&(n+=g(t,o)),t=o}return n}function h(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*e.getAttribute("r");case"rect":return 2*e.getAttribute("width")+2*e.getAttribute("height");case"line":return g({x:e.getAttribute("x1"),y:e.getAttribute("y1")},{x:e.getAttribute("x2"),y:e.getAttribute("y2")});case"polyline":return r(e);case"polygon":var t=e.points;return r(e)+g(t.getItem(t.numberOfItems-1),t.getItem(0))}}function j(t,n){function e(e){return e=void 0===e?0:e,t.el.getPointAtLength(1<=n+e?n+e:0)}var r=e(),o=e(-1),i=e(1);switch(t.property){case"x":return r.x;case"y":return r.y;case"angle":return 180*Math.atan2(i.y-o.y,i.x-o.x)/Math.PI}}function y(e,t){var n,r=/-?\d*\.?\d+/g;if(n=C.pth(e)?e.totalLength:e,C.col(n))if(C.rgb(n)){var o=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=o?"rgba("+o[1]+",1)":n}else n=C.hex(n)?function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+(e=parseInt(t[1],16))+","+parseInt(t[2],16)+","+(t=parseInt(t[3],16))+",1)"}(n):C.hsl(n)?function(e){function t(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);e=parseInt(n[1])/360;var r=parseInt(n[2])/100,o=parseInt(n[3])/100;if(n=n[4]||1,0==r)o=r=e=o;else{var i=o<.5?o*(1+r):o+r-o*r,a=2*o-i;o=t(a,i,e+1/3),r=t(a,i,e);e=t(a,i,e-1/3)}return"rgba("+255*o+","+255*r+","+255*e+","+n+")"}(n):void 0;else o=(o=f(n))?n.substr(0,n.length-o.length):n,n=t&&!/\s/g.test(n)?o+t:o;return{original:n+="",numbers:n.match(r)?n.match(r).map(Number):[0],strings:C.str(e)||t?n.split(r):[]}}function b(e){return x(e=e?s(C.arr(e)?e.map(i):i(e)):[],function(e,t,n){return n.indexOf(e)===t})}function w(e,n){var t=u(n);if(C.arr(e)){var r=e.length;2!==r||C.obj(e[0])?C.fnc(n.duration)||(t.duration=n.duration/r):e={value:e}}return i(e).map(function(e,t){return t=t?0:n.delay,e=C.obj(e)&&!C.pth(e)?e:{value:e},C.und(e.delay)&&(e.delay=t),e}).map(function(e){return l(e,t)})}function O(i,a){var s;return i.tweens.map(function(e){var t=(e=function(e,t){var n,r={};for(n in e){var o=d(e[n],t);C.arr(o)&&(1===(o=o.map(function(e){return d(e,t)})).length&&(o=o[0])),r[n]=o}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(e,a)).value,n=m(a.target,i.name),r=s?s.to.original:n,o=(r=C.arr(t)?t[0]:r,v(C.arr(t)?t[1]:t,r));n=f(o)||f(r)||f(n);return e.from=y(r,n),e.to=y(o,n),e.start=s?s.end:i.offset,e.end=e.start+e.delay+e.duration,e.easing=function(e){return C.arr(e)?T.apply(this,e):N[e]}(e.easing),e.elasticity=(1e3-Math.min(Math.max(e.elasticity,1),999))/1e3,e.isPath=C.pth(t),e.isColor=C.col(e.from.original),e.isColor&&(e.round=1),s=e})}function S(t,e,n,r){var o="delay"===t;return e.length?(o?Math.min:Math.max).apply(Math,e.map(function(e){return e[t]})):o?r.delay:n.offset+r.delay+r.duration}function A(e){var t,n=c(P,e),r=c(M,e),o=function(e){var n=b(e);return n.map(function(e,t){return{target:e,id:t,total:n.length}})}(e.targets),i=[],a=l(n,r);for(t in e)a.hasOwnProperty(t)||"targets"===t||i.push({name:t,offset:a.offset,tweens:w(e[t],r)});return l(n,{children:[],animatables:o,animations:e=function(e,t){return x(s(e.map(function(r){return t.map(function(e){var t=p(r.target,e.name);if(t){var n=O(e,r);e={type:t,property:e.name,animatable:r,tweens:n,duration:n[n.length-1].end,delay:n[0].delay}}else e=void 0;return e})})),function(e){return!C.und(e)})}(o,i),duration:S("duration",e,n,r),delay:S("delay",e,n,r)})}function I(e){function l(){return window.Promise&&new Promise(function(e){return y=e})}function f(e){return w.reversed?w.duration-e:e}function d(t){for(var e=0,n={},r=w.animations,o=r.length;e<o;){var i=r[e],a=i.animatable,s=(u=i.tweens)[f=u.length-1];f&&(s=x(u,function(e){return t<e.end})[0]||s);for(var u=Math.min(Math.max(t-s.start-s.delay,0),s.duration)/s.duration,c=isNaN(u)?1:s.easing(u,s.elasticity),l=(u=s.to.strings,s.round),f=[],d=void 0,p=(d=s.to.numbers.length,0);p<d;p++){var m=void 0,v=(m=s.to.numbers[p],s.from.numbers[p]);m=s.isPath?j(s.value,c*m):v+c*(m-v);l&&(s.isColor&&2<p||(m=Math.round(m*l)/l)),f.push(m)}if(s=u.length)for(d=u[0],c=0;c<s;c++)l=u[c+1],p=f[c],isNaN(p)||(d=l?d+(p+l):d+(p+" "));else d=f[0];X[i.type](a.target,i.property,d,n,a.id),i.currentValue=d,e++}if(e=Object.keys(n).length)for(r=0;r<e;r++)$=$||(E(document.body,"transform")?"transform":"-webkit-transform"),w.animatables[r].target.style[$]=n[r].join(" ");w.currentTime=t,w.progress=t/w.duration*100}function p(e){w[e]&&w[e](w)}function m(){w.remaining&&!0!==w.remaining&&w.remaining--}function t(e){var t=w.duration,n=w.offset,r=n+w.delay,o=w.currentTime,i=w.reversed,a=f(e);if(w.children.length){var s=w.children,u=s.length;if(a>=w.currentTime)for(var c=0;c<u;c++)s[c].seek(a);else for(;u--;)s[u].seek(a)}(r<=a||!t)&&(w.began||(w.began=!0,p("begin")),p("run")),n<a&&a<t?d(a):(a<=n&&0!==o&&(d(0),i&&m()),(t<=a&&o!==t||!t)&&(d(t),i||m())),p("update"),t<=e&&(w.remaining?(g=v,"alternate"===w.direction&&(w.reversed=!w.reversed)):(w.pause(),w.completed||(w.completed=!0,p("complete"),"Promise"in window&&(y(),b=l()))),h=0)}e=void 0===e?{}:e;var v,g,h=0,y=null,b=l(),w=A(e);return w.reset=function(){var e=w.direction,t=w.loop;for(w.currentTime=0,w.progress=0,w.paused=!0,w.began=!1,w.completed=!1,w.reversed="reverse"===e,w.remaining="alternate"===e&&1===t?2:t,d(0),e=w.children.length;e--;)w.children[e].reset()},w.tick=function(e){t((h+(v=e)-(g=g||v))*I.speed)},w.seek=function(e){t(f(e))},w.pause=function(){var e=Y.indexOf(w);-1<e&&Y.splice(e,1),w.paused=!0},w.play=function(){w.paused&&(w.paused=!1,g=0,h=f(w.currentTime),Y.push(w),q||B())},w.reverse=function(){w.reversed=!w.reversed,g=0,h=f(w.currentTime)},w.restart=function(){w.pause(),w.reset(),w.play()},w.finished=b,w.reset(),w.autoplay&&w.play(),w}var $,P={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},M={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},k="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),C={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return C.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||C.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return C.hex(e)||C.rgb(e)||C.hsl(e)}},T=function(a,s,u,c){if(0<=a&&a<=1&&0<=u&&u<=1){var l=new Float32Array(11);if(a!==s||u!==c)for(var e=0;e<11;++e)l[e]=F(.1*e,a,u);return function(e){if(a===s&&u===c)return e;if(0===e)return 0;if(1===e)return 1;for(var t=0,n=1;10!==n&&l[n]<=e;++n)t+=.1;n=t+(e-l[--n])/(l[n+1]-l[n])*.1;var r=3*(1-3*u+3*a)*n*n+2*(3*u-6*a)*n+3*a;if(.001<=r){for(t=0;t<4&&0!=(r=3*(1-3*u+3*a)*n*n+2*(3*u-6*a)*n+3*a);++t){var o=F(n,a,u)-e;n-=o/r}e=n}else if(0===r)e=n;else{n=t,t+=.1;for(var i=0;0<(r=F(o=n+(t-n)/2,a,u)-e)?t=o:n=o,1e-7<Math.abs(r)&&++i<10;);e=o}return F(e,s,c)}}},N=function(){function n(e,t){return 0===e||1===e?e:-Math.pow(2,10*(e-1))*Math.sin(2*(e-1-t/(2*Math.PI)*Math.asin(1))*Math.PI/t)}var e,r="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],n],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(e,t){return 1-n(1-e,t)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(e,t){return e<.5?n(2*e,t)/2:1-n(-2*e+2,t)/2}]},o={linear:T(.25,.25,.75,.75)},i={};for(e in t)i.type=e,t[i.type].forEach(function(n){return function(e,t){o["ease"+n.type+r[t]]=C.fnc(e)?e:T.apply($jscomp$this,e)}}(i)),i={type:i.type};return o}(),X={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,o){r[o]||(r[o]=[]),r[o].push(t+"("+n+")")}},Y=[],q=0,B=L;function L(){q=requestAnimationFrame(e)}function e(e){var t=Y.length;if(t){for(var n=0;n<t;)Y[n]&&Y[n].tick(e),n++;L()}else cancelAnimationFrame(q),q=0}function F(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}return I.version="2.2.0",I.speed=1,I.running=Y,I.remove=function(e){e=b(e);for(var t=Y.length;t--;)for(var n=Y[t],r=n.animations,o=r.length;o--;)a(e,r[o].animatable.target)&&(r.splice(o,1),r.length||n.pause())},I.getValue=m,I.path=function(e,t){var n=C.str(e)?o(e)[0]:e,r=t||100;return function(e){return{el:n,property:e,totalLength:h(n)*(r/100)}}},I.setDashoffset=function(e){var t=h(e);return e.setAttribute("stroke-dasharray",t),t},I.bezier=T,I.easings=N,I.timeline=function(r){var o=I(r);return o.pause(),o.duration=0,o.add=function(e){return o.children.forEach(function(e){e.began=!0,e.completed=!0}),i(e).forEach(function(e){var t=l(e,c(M,r||{}));t.targets=t.targets||r.targets,e=o.duration;var n=t.offset;t.autoplay=!1,t.direction=o.direction,t.offset=C.und(n)?e:v(n,e),o.began=!0,o.completed=!0,o.seek(t.offset),(t=I(t)).began=!0,t.completed=!0,t.duration>e&&(o.duration=t.duration),o.children.push(t)}),o.seek(0),o.reset(),o.autoplay&&o.restart(),o},o},I.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},I}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.scrollama=t()}(this,function(){"use strict";function D(e){for(var t=e.length,n=[],r=0;r<t;r+=1)n.push(e[r]);return n}function G(e){return e instanceof Element?e:"string"==typeof e?document.querySelector(e):null}function a(e){return"scrollama__debug-offset--"+e.id}function Q(e){!function(e){var t=e.id,n=e.offsetVal,r=e.stepClass,o=document.createElement("div");o.setAttribute("id",a({id:t})),o.setAttribute("class","scrollama__debug-offset"),o.style.position="fixed",o.style.left="0",o.style.width="100%",o.style.height="0px",o.style.borderTop="2px dashed black",o.style.zIndex="9999";var i=document.createElement("p");i.innerText='".'+r+'" trigger: '+n,i.style.fontSize="12px",i.style.fontFamily="monospace",i.style.color="black",i.style.margin="0",i.style.padding="6px",o.appendChild(i),document.body.appendChild(o)}({id:e.id,offsetVal:e.offsetVal,stepClass:e.stepEl[0].getAttribute("class")})}function J(e){var t=e.id,n=(e.stepOffsetHeight,e.offsetMargin);e.offsetVal;!function(e){var t=e.id,n=e.offsetMargin,r=(e.offsetVal,a({id:t}));document.querySelector("#"+r).style.top=n+"px"}({id:t,offsetMargin:n})}function K(e){var t=e.id,n=e.index,r=e.state,o=function(e){return"scrollama__debug-step--"+e.id+"-"+e.i}({id:t,i:n}),i=document.querySelector("#"+o+"_above"),a=document.querySelector("#"+o+"_below"),s="enter"===r?"block":"none";i&&(i.style.display=s),a&&(a.style.display=s)}return function(){var c=1,i={},t={},l=null,f=null,d=null,p=null,m=0,v=0,a=0,s=0,u=null,g=null,n=null,h=!1,r=!1,y=!1,b=!1,w=0,x=!1,E=!1,j=null,O=null,e=-1,S=null,A=[];function o(e){var t=0;if(e.offsetParent)for(;t+=e.offsetTop,e=e.offsetParent;);return t<0?0:t}function I(e){return+e.getAttribute("data-scrollama-index")}function $(){window.pageYOffset>e?S="down":window.pageYOffset<e&&(S="up"),e=window.pageYOffset}function P(){a=window.innerHeight,s=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}(),n=f?f.getBoundingClientRect():null,v=m*a,u=d?d.map(function(e){return e.offsetHeight}):[],g=d?d.map(o):[],r&&h&&z(),y&&J({id:p,stepOffsetHeight:u,offsetMargin:v,offsetVal:m})}function M(e){e&&!r?(h&&z(),r=!0):e||(t.top&&t.top.disconnect(),t.bottom&&t.bottom.disconnect(),t.stepAbove&&t.stepAbove.forEach(function(e){return e.disconnect()}),t.stepBelow&&t.stepBelow.forEach(function(e){return e.disconnect()}),t.stepProgress&&t.stepProgress.forEach(function(e){return e.disconnect()}),t.viewportAbove&&t.viewportAbove.forEach(function(e){return e.disconnect()}),t.viewportBelow&&t.viewportBelow.forEach(function(e){return e.disconnect()}),r=!1)}function k(e,t){if("above"===t)for(var n=0;n<e;n++){var r=j[n];"enter"===r.state&&T(d[n],"down"),"up"===r.direction&&(C(d[n],"down",!1),T(d[n],"down"))}else if("below"===t)for(var o=j.length-1;e<o;o--){var i=j[o];"enter"===i.state&&T(d[o],"up"),"down"===i.direction&&(C(d[o],"up",!1),T(d[o],"up"))}}function C(e,t,n){void 0===n&&(n=!0);var r=I(e),o={element:e,index:r,direction:t};j[r].direction=t,j[r].state="enter",x&&n&&"down"===t&&k(r,"above"),x&&n&&"up"===t&&k(r,"below"),i.stepEnter&&"function"==typeof i.stepEnter&&!A[r]&&(i.stepEnter(o,j),y&&K({id:p,index:r,state:"enter"}),E&&(A[r]=!0)),b&&N(e,"down"===t?0:1)}function T(e,t){var n=I(e),r={element:e,index:n,direction:t};j[n].direction=t,j[n].state="exit",b&&N(e,"down"===t?1:0),i.stepExit&&"function"==typeof i.stepExit&&(i.stepExit(r,j),y&&K({id:p,index:n,state:"exit"}))}function N(e,t){var n={element:e,index:I(e),progress:t};i.stepProgress&&"function"==typeof i.stepProgress&&i.stepProgress(n)}function X(){var e={direction:S};O.direction=S,O.state="enter",i.containerEnter&&"function"==typeof i.containerEnter&&i.containerEnter(e)}function Y(){var e={direction:S};O.direction=S,O.state="exit",i.containerExit&&"function"==typeof i.containerExit&&i.containerExit(e)}function q(e){$(),e.forEach(function(e){var t=e.isIntersecting,n=e.boundingClientRect,r=e.target,o=n.bottom,i=n.height,a=o-v,s=I(r),u=j[s];-c<=a&&(t&&"down"===S&&"enter"!==u.state?C(r,S):t||"up"!==S||"enter"!==u.state?!t&&i<=a&&"down"===S&&"enter"===u.state&&T(r,S):T(r,S))})}function B(e){$(),e.forEach(function(e){var t=e.isIntersecting,n=e.boundingClientRect,r=e.target,o=n.bottom,i=n.height,a=o-v,s=I(r),u=j[s];-c<=a&&a<i&&t&&"up"===S&&"enter"!==u.state?C(r,S):a<=c&&!t&&"down"===S&&"enter"===u.state&&T(r,S)})}function L(e){$(),e.forEach(function(e){var t=e.isIntersecting,n=e.target,r=I(n),o=j[r];t&&"down"===S&&"enter"!==o.state&&"down"!==o.direction&&(C(n,"down"),T(n,"down"))})}function F(e){$(),e.forEach(function(e){var t=e.isIntersecting,n=e.target,r=I(n),o=j[r];t&&"up"===S&&"enter"!==o.state&&"up"!==o.direction&&(C(n,"up"),T(n,"up"))})}function _(e){$(),e.forEach(function(e){var t=e.isIntersecting,n=e.intersectionRatio,r=e.boundingClientRect,o=e.target,i=r.bottom;t&&-c<=i-v&&N(o,+n.toFixed(3))})}function R(e){$();var t=e[0],n=t.isIntersecting,r=t.boundingClientRect,o=(r.top,r.bottom);-c<o&&(n?X():"enter"===O.state&&Y())}function V(e){$();var t=e[0],n=t.isIntersecting;t.boundingClientRect.top<c&&(n?X():"enter"===O.state&&Y())}function H(){t.stepProgress&&t.stepProgress.forEach(function(e){return e.disconnect()}),t.stepProgress=d.map(function(e,t){var n=u[t]-v+"px 0px "+(-a+v)+"px 0px",r=function(e){for(var t=Math.ceil(e/w),n=[],r=1/t,o=0;o<t;o++)n.push(o*r);return n}(u[t]),o=new IntersectionObserver(_,{root:null,rootMargin:n,threshold:r});return o.observe(e),o})}function z(){t.viewportAbove&&t.viewportAbove.forEach(function(e){return e.disconnect()}),t.viewportAbove=d.map(function(e,t){var n=g[t],r=-(a-v+u[t]),o=new IntersectionObserver(L,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(e),o}),t.viewportBelow&&t.viewportBelow.forEach(function(e){return e.disconnect()}),t.viewportBelow=d.map(function(e,t){var n=-(v+u[t]),r=s-g[t]-u[t]-v,o=new IntersectionObserver(F,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(e),o}),t.stepAbove&&t.stepAbove.forEach(function(e){return e.disconnect()}),t.stepAbove=d.map(function(e,t){var n=u[t],r=new IntersectionObserver(q,{root:null,rootMargin:n+"px 0px "+(-a+v)+"px 0px",threshold:0});return r.observe(e),r}),t.stepBelow&&t.stepBelow.forEach(function(e){return e.disconnect()}),t.stepBelow=d.map(function(e,t){var n=-v,r=s-a+u[t]+v,o=new IntersectionObserver(B,{root:null,rootMargin:n+"px 0px "+r+"px 0px",threshold:0});return o.observe(e),o}),b&&H(),l&&f&&(function(){t.top&&t.top.unobserve(l);var e={root:null,rootMargin:a+"px 0px -"+a+"px 0px",threshold:0};t.top=new IntersectionObserver(R,e),t.top.observe(l)}(),function(){t.bottom&&t.bottom.unobserve(l);var e={root:null,rootMargin:"-"+n.height+"px 0px "+n.height+"px 0px",threshold:0};t.bottom=new IntersectionObserver(V,e),t.bottom.observe(l)}())}var Z={};return Z.setup=function(e){var t=e.container,n=e.graphic,r=e.step,o=e.offset;void 0===o&&(o=.5);var i=e.progress;void 0===i&&(i=!1);var a=e.threshold;void 0===a&&(a=4);var s=e.debug;void 0===s&&(s=!1);var u=e.order;void 0===u&&(u=!0);var c=e.once;return void 0===c&&(c=!1),p=function(){var t="abcdefghijklmnopqrstuv",n=t.length,e=(new Date).getTime();return""+[0,0,0].map(function(e){return t[Math.floor(Math.random()*n)]}).join("")+e}(),d=function(e,t){return void 0===t&&(t=document),"string"==typeof e?D(t.querySelectorAll(e)):e instanceof Element?D([e]):e instanceof NodeList?D(e):e instanceof Array?e:[]}(r),l=t?G(t):null,f=n?G(n):null,d.length?(y=s,b=i,x=u,E=c,Z.offsetTrigger(o),w=Math.max(1,+a),h=!0,y&&Q({id:p,stepEl:d,offsetVal:m}),d.forEach(function(e,t){return e.setAttribute("data-scrollama-index",t)}),j=d.map(function(){return{direction:null,state:null}}),O={direction:null,state:null},P(),M(!0)):console.error("scrollama error: no step elements"),Z},Z.resize=function(){return P(),Z},Z.enable=function(){return M(!0),Z},Z.disable=function(){return M(!1),Z},Z.destroy=function(){M(!1),Object.keys(i).forEach(function(e){return i[e]=null}),Object.keys(t).forEach(function(e){return t[e]=null})},Z.offsetTrigger=function(e){return e&&!isNaN(e)?(m=Math.min(Math.max(0,e),1),Z):m},Z.onStepEnter=function(e){return i.stepEnter=e,Z},Z.onStepExit=function(e){return i.stepExit=e,Z},Z.onStepProgress=function(e){return i.stepProgress=e,Z},Z.onContainerEnter=function(e){return i.containerEnter=e,Z},Z.onContainerExit=function(e){return i.containerExit=e,Z},Z}});var io=0;function debounce(r,o,i){var a;return function(){var e=this,t=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||r.apply(e,t)},o),n&&r.apply(e,t)}}function throttle(e,t){var n=!1;return function(){n||(e.call(),n=!0,setTimeout(function(){n=!1},t))}}function hoist(e,t){window[e](t)}"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}),document.documentElement.classList.add("intersectable"),io=1),document.addEventListener("DOMContentLoaded",function(){var r,o,i,a,s,u,c=document.getElementById("glennopolis"),n=["scene0","scene1","scene2","scene3","scene4"],l=[1,1.6,1.3,2,1.4],f={};if(io&&c){n.forEach(function(e,t){if(o=0,r=c.querySelector(".markers."+e)){o||(scale=l[t],scale&&(o=1/scale)),i=r.querySelectorAll("use");for(var n=0;n<i.length;n++)o&&1!==o&&(a=i[n].getBBox())&&(s=-1*(o-1)*(a.x+a.width/2),u=-1*(o-1)*(a.y+a.height),i[n].style.transform="translate("+s+"px, "+u+"px) scale("+o+")")}});var e=debounce(function(){t.resize(),d.resize()},200),t=scrollama(),d=scrollama(),p=c.parentNode.parentNode.querySelectorAll(".scenario-holder > li");t.setup({step:p,offset:.9}).onStepEnter(function(e){if("up"===e.direction)return;var t=n[e.index];if(c.hasOwnProperty("currentScene")&&c.currentScene===t)return;c.currentScene=t,f[t](e.index)}),d.setup({step:p,offset:.2,container:c.parentNode.parentNode,graphic:c}).onStepEnter(function(e){if("down"===e.direction||4===e.index)return;var t=n[e.index];if(c.hasOwnProperty("currentScene")&&"scene0"!==c.currentScene&&c.currentScene===t)return;c.currentScene=t,f[t](e.index)}).onContainerExit(function(e){"up"===e.direction&&(delete c.currentScene,c.className="m-active")}),window.addEventListener("resize",e)}function m(e,t,n){if(n=n||0)return setTimeout(function(){e.setAttribute("xlink:href","#marker-"+t)},n);e.setAttribute("xlink:href","#marker-"+t)}f.scene0=function(e){c.className="m-inactive",c.firstElementChild.style=""},f.scene1=function(e){if(c.hasOwnProperty("scene1"))c.scene1.person.style="",c.scene1.security.style="",m(c.scene1.person.firstElementChild,"person");else{var t=c.querySelector(".markers.scene1");if(!t)return;var n=t.lastElementChild,r=t.firstElementChild;if(!n||!r||n===r)return}if(c.className="scenario1 campus",c.hasOwnProperty("scene1"))c.scene1.timeline.restart();else{var o=anime.timeline({elasticity:0,easing:"linear"});o.add({targets:c.firstElementChild,scale:l[e],translateX:"-44.12%",translateY:"-42.06%",duration:500}).add({targets:n,translateX:-36,translateY:19,duration:1500,offset:"+=500",complete:function(){m(n.firstElementChild,"alert")}}).add({targets:r,translateX:220,translateY:85,duration:1e3,offset:"+=300"}).add({offset:"+=300",begin:function(){m(n.firstElementChild,"okay")}}),c.scene1={person:n,security:r,timeline:o}}},f.scene2=function(e){if(c.hasOwnProperty("scene2")){c.scene2.security.style="",m(c.scene2.person,"person");for(var t=c.scene2.people.children,n=0;n<t.length;n++)m(t[n],"person")}else{var r=c.querySelector(".markers.scene2");if(!r)return;var o=r.children;if(!o||3!==o.length)return}if(c.className="scenario2 campus",c.hasOwnProperty("scene2"))c.scene2.timeline.restart();else{var i=anime.timeline({elasticity:0,easing:"linear"});i.add({targets:c.firstElementChild,scale:l[e],translateX:"-18.7%",translateY:"-42.06%",duration:500}).add({targets:c,translateX:[{value:0},{value:"-1em"},{value:0},{value:"1em"},{value:0},{value:"-2em"},{value:0},{value:"2em"},{value:0},{value:"-1em"},{value:0}],translateY:[{value:0},{value:".25em"},{value:".25em"},{value:0},{value:"-.25em"},{value:"-.25em"},{value:0},{value:".125em"},{value:0},{value:"-.125em"},{value:0}],duration:900,offset:"+=800"}).add({targets:o[1].children,offset:"+=100",begin:function(e){m(o[0],"alert");for(var t=0;t<e.animatables.length;t++)m(e.animatables[t].target,"alert")}}).add({targets:o[1].children,offset:"+=500",begin:function(e){for(var t=0;t<e.animatables.length;t++)m(e.animatables[t].target,"okay",100*t)}}).add({targets:o[2],translateX:[{value:-300},{value:-300}],translateY:[{value:-30},{value:-70}],duration:1e3,offset:"+=500"}).add({offset:"+=300",begin:function(){m(o[0],"okay")}}),c.scene2={person:o[0],people:o[1],security:o[2],timeline:i}}},f.scene3=function(e){if(c.hasOwnProperty("scene3"))c.scene3.security.style="",c.scene3.question.style="",m(c.scene3.person,"person");else{var t=c.querySelector(".markers.scene3");if(!t)return;var n=t.children;if(!n||3!==n.length)return}if(c.className="scenario3 hospital",c.hasOwnProperty("scene3"))c.scene3.timeline.restart();else{var r=anime.timeline({elasticity:0,easing:"linear"});r.add({targets:c.firstElementChild,scale:[{value:1},{value:[1,l[e]]}],translateX:[{value:0},{value:0}],translateY:[{value:0},{value:[0,"-9.346%"]}],duration:1e3}).add({targets:n[2],translateX:[{value:[0,-120],duration:500},{value:0,duration:300}],opacity:[{value:0,duration:1},{value:[1,1],duration:250},{value:[1,0],duration:250},{value:0,duration:300}],offset:"+=800",complete:function(){m(n[0],"okay")}}).add({offset:"+=500",begin:function(){m(n[0],"person")}}).add({targets:n[2],translateX:[{value:[0,-120],duration:500},{value:0,duration:300}],opacity:[{value:[1,1],duration:250},{value:[1,0],duration:250},{value:0,duration:300}],offset:"+=300",complete:function(){m(n[0],"okay")}}).add({offset:"+=500",begin:function(){m(n[0],"person")}}).add({targets:n[2],translateX:[{value:[0,-120],duration:500},{value:0,duration:1300}],opacity:[{value:[1,1],duration:250},{value:[1,0],duration:250},{value:0,duration:1300}],offset:"+=300",complete:function(){m(n[0],"alert")}}).add({targets:n[1],translateX:[{value:0},{value:-160},{value:-160}],translateY:[{value:20},{value:20},{value:-13}],duration:1200,offset:"+=600"}).add({offset:"+=300",begin:function(){m(n[0],"okay")}}),c.scene3={person:n[0],question:n[2],security:n[1],timeline:r}}},f.scene4=function(e){if(c.hasOwnProperty("scene4"))c.scene4.security[0].style="",c.scene4.security[1].style="",c.scene4.red[0].style="",c.scene4.red[1].style="";else{var t=c.querySelector(".markers.scene4"),n=c.querySelector(".heatmaps.scene4");if(!t||!n)return;var r=t.children;if(!r||3!==r.length)return;var o=n.children;if(!o||3!==o.length)return}if(c.className="scenario4 campus",c.hasOwnProperty("scene4"))c.scene4.timeline.restart();else{var i=anime.timeline({elasticity:0,easing:"linear"});i.add({targets:c.firstElementChild,scale:[{value:1},{value:[1,l[e]]}],translateX:[{value:0},{value:[0,"-30.59%"]}],translateY:[{value:0},{value:[0,"-42.06%"]}],duration:1e3}).add({targets:r[1],translateX:[{value:-100},{value:-70}],translateY:[{value:-120},{value:-160}],duration:1200,offset:2800}).add({targets:o[1],opacity:0,duration:1e3,offset:"-=900"}).add({targets:r[2],translateX:60,translateY:-95,duration:1200,offset:3200}).add({targets:o[2],opacity:0,duration:1200,offset:"-=700"}),c.scene4={security:[r[1],r[2]],red:[o[1],o[2]],timeline:i}}}});
